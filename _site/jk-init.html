<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Jailkit Quickstart by prikha</title>
</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1>Jailkit Quickstart</h1>
            <h2>How to setup a jailed user and deploy your apps secure.</h2>
        </header>

        <section id="pages" class="clearfix">
            <a href="/">Home</a> |
            <a href="/agent-forwarding.html">Agent Forwarding</a> |
            <a href="/jk-init.html">Jk Init Config</a> |
            <a href="/install-node.html">Node.js</a>

        </section>

        <hr>

        <section id="main_content">
            <h3>/etc/jailkit/jk_init.ini</h3>

<h4><a href="/">back</a></h4>
<div class="highlight"><pre><code class="sh language-sh" data-lang="sh"><span class="o">[</span>uidbasics<span class="o">]</span>
<span class="c"># this section probably needs adjustment on 64bit systems</span>
<span class="c"># or non-Linux systems</span>
<span class="nv">comment</span> <span class="o">=</span> common files <span class="k">for </span>all jails that need user/group information
<span class="nv">paths</span> <span class="o">=</span> /lib/libnsl.so.1, /lib64/libnsl.so.1, /lib/libnss*.so.2, /lib64/libnss*.so.2, /lib/i386-linux-gnu/libnsl.so.1, /lib/i386-linux-gnu/libnss*.so.2, /lib/x86_64-linux-gnu/libnsl.so.1, /lib/x86_64-linux-gnu/libnss*.so.2, /etc/nsswitch.conf, /etc/ld.so.conf
<span class="c"># Solaris needs</span>
<span class="c"># paths = /etc/default/nss, /lib/libnsl.so.1, /usr/lib/nss_*.so.1, /etc/nsswitch.conf</span>

<span class="o">[</span>netbasics<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> common files <span class="k">for </span>all jails that need any internet connectivity
<span class="nv">paths</span> <span class="o">=</span> /lib/libnss_dns.so.2, /lib64/libnss_dns.so.2, /etc/resolv.conf, /etc/host.conf, /etc/hosts, /etc/protocols, /etc/services
<span class="c"># on Solaris devices /dev/udp and /dev/tcp might be needed too, not sure</span>

<span class="o">[</span>logbasics<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> timezone information and log sockets
<span class="nv">paths</span> <span class="o">=</span> /etc/localtime
<span class="nv">need_logsocket</span> <span class="o">=</span> 1
<span class="c"># Solaris does not need logsocket</span>
<span class="c"># but needs</span>
<span class="c"># devices = /dev/log, /dev/conslog</span>

<span class="o">[</span>jk_lsh<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> Jailkit limited shell
<span class="nv">paths</span> <span class="o">=</span> /usr/sbin/jk_lsh, /etc/jailkit/jk_lsh.ini
<span class="nv">users</span> <span class="o">=</span> root
<span class="nv">groups</span> <span class="o">=</span> root
<span class="nv">includesections</span> <span class="o">=</span> uidbasics, logbasics

<span class="o">[</span>limitedshell<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> <span class="nb">alias </span><span class="k">for </span>jk_lsh
<span class="nv">includesections</span> <span class="o">=</span> jk_lsh

<span class="o">[</span>cvs<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> Concurrent Versions System
<span class="nv">paths</span> <span class="o">=</span> cvs
<span class="nv">devices</span> <span class="o">=</span> /dev/null

<span class="o">[</span>git<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> Fast Version Control System
<span class="nv">paths</span> <span class="o">=</span> /usr/bin/git*, /usr/lib/git-core, /usr/bin/basename, /bin/uname
<span class="nv">includesections</span> <span class="o">=</span> editors, perl

<span class="o">[</span>scp<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> ssh secure copy
<span class="nv">paths</span> <span class="o">=</span> scp
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics
<span class="nv">devices</span> <span class="o">=</span> /dev/urandom

<span class="o">[</span>sftp<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> ssh secure ftp
<span class="nv">paths</span> <span class="o">=</span> /usr/lib/sftp-server, /usr/libexec/openssh/sftp-server, /usr/lib/misc/sftp-server, /usr/libexec/sftp-server, /usr/lib/openssh/sftp-server
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics
<span class="nv">devices</span> <span class="o">=</span> /dev/urandom, /dev/null
<span class="c"># on solaris</span>
<span class="c">#paths = /usr/lib/ssh/sftp-server</span>

<span class="o">[</span>ssh<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> ssh secure shell
<span class="nv">paths</span> <span class="o">=</span> ssh
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics
<span class="nv">devices</span> <span class="o">=</span> /dev/urandom, /dev/tty, /dev/null

<span class="o">[</span>rsync<span class="o">]</span>
<span class="nv">paths</span> <span class="o">=</span> rsync
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics

<span class="o">[</span>procmail<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> procmail mail delivery
<span class="nv">paths</span> <span class="o">=</span> procmail, /bin/sh
<span class="nv">devices</span> <span class="o">=</span> /dev/null

<span class="o">[</span>basicshell<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> bash based shell with several basic utilities
<span class="nv">paths</span> <span class="o">=</span> /bin/sh, bash, ls, cat, chmod, mkdir, cp, cpio, date, dd, <span class="nb">echo</span>, egrep, <span class="nb">false</span>, fgrep, grep, gunzip, gzip, ln, ls, mkdir, mktemp, more, mv, <span class="nb">pwd</span>, rm, rmdir, sed, sh, sleep, sync, tar, touch, <span class="nb">true</span>, uncompress, zcat, /etc/motd, /etc/issue, /etc/bash.bashrc, /etc/bashrc, /etc/profile, /usr/lib/locale/en_US.utf8
<span class="nv">users</span> <span class="o">=</span> root
<span class="nv">groups</span> <span class="o">=</span> root
<span class="nv">includesections</span> <span class="o">=</span> uidbasics

<span class="o">[</span>midnightcommander<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> Midnight Commander
<span class="nv">paths</span> <span class="o">=</span> mc, mcedit, mcview, /usr/share/mc
<span class="nv">includesections</span> <span class="o">=</span> basicshell, terminfo

<span class="o">[</span>extendedshell<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> bash shell including things like awk, bzip, tail, less
<span class="nv">paths</span> <span class="o">=</span> awk, bzip2, bunzip2, ldd, less, clear, cut, du, find, head, less, md5sum, nice, sort, tac, tail, tr, sort, wc, watch, whoami
<span class="nv">includesections</span> <span class="o">=</span> basicshell, midnightcommander, editors

<span class="o">[</span>terminfo<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> terminfo databases, required <span class="k">for </span>example <span class="k">for </span>ncurses or vim
<span class="nv">paths</span> <span class="o">=</span> /etc/terminfo, /usr/share/terminfo, /lib/terminfo

<span class="o">[</span>editors<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> vim, joe and nano
<span class="nv">includesections</span> <span class="o">=</span> terminfo
<span class="nv">paths</span> <span class="o">=</span> joe, nano, vi, vim, /etc/vimrc, /etc/joe, /usr/share/vim

<span class="o">[</span>netutils<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> several internet utilities like wget, ftp, rsync, scp, ssh
<span class="nv">paths</span> <span class="o">=</span> wget, lynx, ftp, host, rsync, smbclient
<span class="nv">includesections</span> <span class="o">=</span> netbasics, ssh, sftp, scp

<span class="o">[</span>apacheutils<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> htpasswd utility
<span class="nv">paths</span> <span class="o">=</span> htpasswd

<span class="o">[</span>extshellplusnet<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> <span class="nb">alias </span><span class="k">for </span>extendedshell + netutils + apacheutils
<span class="nv">includesections</span> <span class="o">=</span> extendedshell, netutils, apacheutils

<span class="o">[</span>openvpn<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> jail <span class="k">for </span>the openvpn daemon
<span class="nv">paths</span> <span class="o">=</span> /usr/sbin/openvpn
<span class="nv">users</span> <span class="o">=</span> root,nobody
<span class="nv">groups</span> <span class="o">=</span> root,nogroup
<span class="nv">includesections</span> <span class="o">=</span> netbasics
<span class="nv">devices</span> <span class="o">=</span> /dev/urandom, /dev/random, /dev/net/tun
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics
<span class="nv">need_logsocket</span> <span class="o">=</span> 1

<span class="o">[</span>apache<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> the apache webserver, very basic setup, probably too limited <span class="k">for </span>you
<span class="nv">paths</span> <span class="o">=</span> /usr/sbin/apache
<span class="nv">users</span> <span class="o">=</span> root, www-data
<span class="nv">groups</span> <span class="o">=</span> root, www-data
<span class="nv">includesections</span> <span class="o">=</span> netbasics, uidbasics

<span class="o">[</span>perl<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> the perl interpreter and libraries
<span class="nv">paths</span> <span class="o">=</span> perl, /usr/lib/perl, /usr/lib/perl5, /usr/share/perl, /usr/share/perl5

<span class="o">[</span>xauth<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> getting X authentication to work
<span class="nv">paths</span> <span class="o">=</span> /usr/bin/X11/xauth, /usr/X11R6/lib/X11/rgb.txt, /etc/ld.so.conf

<span class="o">[</span>xclients<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> minimal files <span class="k">for </span>X clients
<span class="nv">paths</span> <span class="o">=</span> /usr/X11R6/lib/X11/rgb.txt
<span class="nv">includesections</span> <span class="o">=</span> xauth

<span class="o">[</span>vncserver<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> the VNC server program
<span class="nv">paths</span> <span class="o">=</span> Xvnc, Xrealvnc, /usr/X11R6/lib/X11/fonts/
<span class="nv">includesections</span> <span class="o">=</span> xclients

<span class="o">[</span>ping<span class="o">]</span>
<span class="nv">comment</span> <span class="o">=</span> Ping program
<span class="nv">paths_w_setuid</span> <span class="o">=</span> /bin/ping

<span class="c">#[xterm]</span>
<span class="c">#comment = xterm</span>
<span class="c">#paths = /usr/bin/X11/xterm, /usr/share/terminfo, /etc/terminfo</span>
<span class="c">#devices = /dev/pts/0, /dev/pts/1, /dev/pts/2, /dev/pts/3, /dev/pts/4,</span>
<span class="c">#/dev/ptyb4, /dev/ptya4, /dev/tty, /dev/tty0, /dev/tty4</span>
</code></pre></div>
        </section>

        <footer>
            Jailkit Quickstart is maintained by <a href="https://github.com/prikha">prikha</a><br>
            Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>


    </div>
</div>
</body>
</html>